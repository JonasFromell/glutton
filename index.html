<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Glutton.css</title>

	<link rel="stylesheet" href="build/stylesheets/style.css">
</head>
<body>
	<div class="wrapper">
		<h1>Glutton</h1>
		<h2>Buttons with integrated indicators for use in forms etc.</h2>

		<button id="tester" class="glutton fill-horizontal">Test me!</button>
<!-- Usage code block -->
<pre class="highlight">
<span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"tester"</span> <span class="na">class=</span><span class="s">"glutton fill-horizontal"</span><span class="nt">&gt;</span>Test me!<span class="nt">&lt;/button&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="nx">$</span><span class="p">(</span><span class="s2">"#tester"</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// asyncEvent is a function that returs a promise
</span>    <span class="c1">// ex. $.ajax() or a custom function makin use of $.Deferred
</span>
    <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">glutton</span><span class="p">(</span><span class="s2">"start"</span><span class="p">,</span> <span class="nx">asyncEvent</span><span class="p">);</span>
  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</pre>

	</div>

	<script src="build/javascript/vendor/jquery.js"></script>
	<script src="build/javascript/glutton.js"></script>

	<script>
		function asyncEvent() {
			var dfd = new $.Deferred();
			var i   = 0;

			setTimeout(function () {
				dfd.resolve("hurray");
			}, Math.floor(900 + Math.random() * 2000));

			setTimeout(function () {
				dfd.reject("sorry");
			}, Math.floor(900 + Math.random() * 2000));

			setTimeout(function working () {
				if (dfd.state() === "pending") {
					dfd.notify(i, 100);
					i++;
					setTimeout(working, 500);
				}
			}, 1);

			return dfd.promise();
		}

		$('#tester').on('click', function (e) {
			$(this).glutton('start', asyncEvent);
		});
	</script>
</body>
</html>